<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to Package Development</title>
    <meta charset="utf-8" />
    <meta name="author" content="Stephen Balogun" />
    <meta name="date" content="2021-09-04" />
    <script src="libs/header-attrs-2.10/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/rladies-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="stephen.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to Package Development
### Stephen Balogun
### September 04, 2021

---


## Outline

- About me

- What is a package

- Why develop a package?

- Components of a package

- Package development in two steps

- What are we going to learn today?

- System requirements

- Background knowledge required?

- Demo/Hands-on

- Q&amp;A


---

## About me

.right-column[

- A Public Health Physician

- A quality improvement professional and patient safety expert - led me to data science

- I am currently the Team Lead, Epidemiology and Surveillance Unit for the CARITAS Nigeria 4GATES program

- Author, [{tidyndr}](https://CRAN.R-project.org/package=tidyndr)

- Co-founder: [r4hds](https://r4hds.netlify.app/)

- [My personal website](https://taiye.rbind.io) üòÑ

- Twitter &lt;svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"&gt;&lt;/path&gt;&lt;/svg&gt;: follow @eppydoc üëç
]

.left-column[
&lt;img src="./images/Stephen.png" width="609" /&gt;
]

---

## What is a package?

- A collection of related functions
  
    - {tibble, readr, purrr}

- A collection of datasets

    - {gapminder, COVID19, rKenyaCensus}

- A mix of both [functions and dataset(s)]

    - {tidyndr, dplyr, tidyr}


---

## Why develop a package?
- Because you have a group of reusable codes

    - saves time
    
    - makes your code available to others, easily
    
    - validates your codes

&gt; "Anything that can be automated, should be automated.
    Do as little as possible by hand.
    Do as much as possible with functions.
    The goal is to spend your time thinking about what you want your package to do rather than thinking about the minutiae of package structure."
&gt; 
&gt; --- ([R Packages](https://r-pkgs.org/intro.html))


---

## Components of a package
1. R codes

2. Documentations

3. Package metadata - DESCRIPTION file

4. License/Licensing

5. A Readme.md

4. Unit tests

6. Vignettes

7. Data

---

## Package development in two steps
.pull-left[
&lt;img src="./images/devtools.png" width="1287" /&gt;

**Build your package (locally)**

]

.pull-right[
&lt;img src="./images/git_github.png" width="1339" /&gt;

**Deploy your package to a remote repository**
]

---

## What are we going to learn today?
- Building package 

    1. A little about functions in packages: how it is different from standard functions in scripts
    
    2. Documenting our R functions
    
    3. Function testing
    
    4. Editing package metadata - DESCRIPTION file
    
    5. Writing the "Readme" file
    
    6. Package vignette
    
- Package deployment

    1. Deploying to GitHub
    
    2. Steps to CRAN deployment
    
---

## Requirements
.pull-left[

- **System requirements**

    1. [R](https://cran.r-project.org/) (I am using version 4.1.1)
    
    2. [Git](https://git-scm.com/downloads) / [GitHub](https://github.com/)
    
    1. [RStudio](https://www.rstudio.com/products/rstudio/download/)
    
    4. Compiler: [Rtools](https://cran.r-project.org/bin/windows/Rtools/) on *Windows* / Xcode command line tools on [*macOS*](https://developer.apple.com/programs/register/)
        
]

.pull-right[

- **Package requirements**

    1. {devtools} - a metapackage of 9 focused packages
    
    2. {knitr} - comes with RStudio
    
    3. {available}
    
]


&gt; "Check that your system set up is complete using the code below in R:""


```r
if(!requirenamespace("pacman") install.packages("pacman"))
pacman::p_load(devtools, available) ## p_load auto-installs packages that are not pre-installed on your computer
has_devel() ## checks that your system has all the required setup to build a package
```

---

## Background knowledge

1. Basic knowledge of functions

2. Some knowledge of Markdown/RMarkdown

3. Minimal understanding of git/GitHub

---
class: inverse, middle, center
background-image: url(https://upload.wikimedia.org/wikipedia/commons/3/39/Naruto_Shiki_Fujin.svg)
background-size: contain

# Demo
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
